(self.webpackChunkmybookingJsEngine=self.webpackChunkmybookingJsEngine||[]).push([[223],{8223:function(e,n,s){"use strict";var t,a,r=s(5318)(s(3038));s(9600),s(1539),s(4747),s(6992),s(8559),s(1249),s(9720),s(4916),s(5306),s(8862),t=[s(3609),s(144),s(8041),s(6066),s(2638),s(7049),s(5435)],void 0===(a=function(e,n,s,t,a,o,i){var g={requestLanguage:null,booking:null,configuration:null,getPassengers:function(){a.show();var s=n.URL_PREFIX+"/api/booking/frontend/passengers/"+this.booking.free_access_id,t=[];null!=this.requestLanguage&&t.push("lang="+this.requestLanguage),n.apiKey&&""!=n.apiKey&&t.push("api_key="+n.apiKey),t.length>0&&(s+="?",s+=t.join("&")),e.ajax({type:"GET",url:s,dataType:"json",contentType:"application/json; charset=utf-8",crossDomain:!0,success:function(n){var s=n.data,t=n.total;e("#passengers_list #passengers_list__not_data").hide(),e("#passengers_list__content").html(""),t>0?document.getElementById("script_passengers_list__item")&&s.forEach((function(n,s){var t=o("script_passengers_list__item")({passenger:n,index:s+1});e("#passengers_list__content").append(t)})):e("#passengers_list #passengers_list__not_data").show()},error:function(){alert(i.t("myReservation.passenger.listed.error"))},complete:function(){a.hide()}})},addAPassenger:function(s){var t=n.URL_PREFIX+"/api/booking/frontend/passengers/"+this.booking.free_access_id+"/passenger",r=[];null!=this.requestLanguage&&r.push("lang="+this.requestLanguage),n.apiKey&&""!=n.apiKey&&r.push("api_key="+n.apiKey),r.length>0&&(t+="?",t+=r.join("&")),e.ajax({type:"POST",url:t,dataType:"json",data:s,contentType:"application/json; charset=utf-8",crossDomain:!0,success:function(){alert(i.t("myReservation.passenger.added.success")),c.refresh()},error:function(){alert(i.t("myReservation.passenger.added.error"))},complete:function(){a.hide()}})},removeAPassenger:function(s){var t=n.URL_PREFIX+"/api/booking/frontend/passengers/"+this.booking.free_access_id+"/passenger/"+s,r=[];null!=this.requestLanguage&&r.push("lang="+this.requestLanguage),n.apiKey&&""!=n.apiKey&&r.push("api_key="+n.apiKey),r.length>0&&(t+="?",t+=r.join("&")),e.ajax({type:"DELETE",url:t,crossDomain:!0,success:function(){alert(i.t("myReservation.passenger.remove.success")),c.refresh("table")},error:function(){alert(i.t("myReservation.passenger.remove.error"))},complete:function(){a.hide()}})}},c={getPassengers:function(){g.getPassengers()},addAPassenger:function(n){n.preventDefault();var s=e("form[name=booking_passengers_form]");if(s.valid()){var t=s.formParams(!1),a=Object.fromEntries(Object.entries(t).map((function(e){var n=(0,r.default)(e,2),s=n[0],t=n[1];return[s.replace("passenger_",""),t]}))),o=JSON.stringify(a);g.addAPassenger(o)}},removeAPassenger:function(n){n.preventDefault();var s=e(n.currentTarget).attr("data-id");g.removeAPassenger(s)},refresh:function(e){switch(e){case"table":u.refreshTable();break;case"form":u.clearForm();break;default:u.refreshTable(),u.clearForm()}}},u={init:function(e){var n=e.booking,a=e.configuration;g.requestLanguage=s.language(document.documentElement.lang),i.init({lng:g.requestLanguage,resources:t},(function(){})),g.booking=n,g.configuration=a,this.addTemplates()},addTemplates:function(){if(document.getElementById("script_passengers_table")){var n=o("script_passengers_table")({booking:g.booking,configuration:g.configuration});e("#passengers_table_container").html(n)}if(document.getElementById("script_passengers_form")){var s=o("script_passengers_form")({booking:g.booking,configuration:g.configuration});e("#passengers_form_container").html(s)}(document.getElementById("script_passengers_table")||document.getElementById("script_passengers_form"))&&e("#passengers_container").show(),this.setupControls(),this.setupEvents(),this.refreshTable()},setupControls:function(){},setupEvents:function(){e("#btn_add_passenger").length&&e("#btn_add_passenger").on("click",c.addAPassenger),e("#passengers_table_container").length&&e("#passengers_table_container").on("click","#btn_remove_passenger",c.removeAPassenger)},refreshTable:function(){c.getPassengers()},clearForm:function(){document.getElementById("booking_passengers_form").reset()}};return{model:g,controller:c,view:u}}.apply(n,t))||(e.exports=a)},9720:function(e,n,s){var t=s(2109),a=s(4699).entries;t({target:"Object",stat:!0},{entries:function(e){return a(e)}})},8559:function(e,n,s){var t=s(2109),a=s(408),r=s(6135);t({target:"Object",stat:!0},{fromEntries:function(e){var n={};return a(e,(function(e,s){r(n,e,s)}),{AS_ENTRIES:!0}),n}})}}]);